###### 1 January 2014 on Personal Blog

# [So this is 2014]

|[![FullSize][2]][1]|
|:---:|
| _Double Rainbow from Moana Park, QLD, AU_ |

A very Happy New Year to anyone reading this posting. This is really just
another test posting to make sure the methods I am describing in the
README.md actually do work.

This post was created with this script...

``` bash
#!/bin/sh
# newpost 20140130 (c) Mark Constable (AGPL-3.0)
#
# Usage: newpost My New Title
#
# Change the BJAX variable below to the full path of your Bjax repository and
# copy this script to /usr/bin/newpost then sudo chmod +x /usr/bin/newpost.

test -z "$BJAX" && BJAX=/home/admin/var/www/localhost # PLEASE CHANGE
test -z "$1" && TITLE="Untitled" || TITLE="$@"
test ! -d $BJAX && echo "Bjax docroot does not exist: $BJAX" && exit 1
test ! -f $BJAX/lib/md/1.md && echo "$BJAX/lib/md/1.md does not exist" && exit 2

NEXT=`echo $(($(/bin/ls -1v $BJAX/lib/md | tail -n 1 | cut -d. -f 1)+1))`
POST="lib/md/$NEXT.md"

cp $BJAX/lib/md/1.md $BJAX/lib/md/.1.md.bkp

cat << EOM > $BJAX/$POST
###### `date "+%e %B %Y"` on Personal Blog

# [$TITLE]

EOM
echo "Create the first summary paragraph then ctrl-x"
sleep 2
nano -t -x -c +10 $BJAX/$POST

cat $BJAX/$POST > $BJAX/lib/md/.1.md.tmp
echo >> $BJAX/lib/md/.1.md.tmp
echo "[$TITLE]: /$NEXT" >> $BJAX/lib/md/.1.md.tmp
echo >> $BJAX/lib/md/.1.md.tmp
echo "---" >> $BJAX/lib/md/.1.md.tmp
cat $BJAX/lib/md/.1.md.bkp >> $BJAX/lib/md/.1.md.tmp

echo "Now continue with the rest of your post and ctrl-x again"
sleep 2
nano -t -x -c +20 $BJAX/$POST

cd $BJAX
git add $POST
git commit -am "Added $POST"
git push
cd -
mv $BJAX/lib/md/.1.md.tmp $BJAX/lib/md/1.md
echo "Finished"
```

[So this is 2014]: /1
[1]: http://u2.renta.net/lib/img/double_rainbow.jpg
[2]: /lib/img/double_rainbow.jpg
